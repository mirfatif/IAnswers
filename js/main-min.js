"use strict";{const a=document,b=t=>a.createElement(t),c=(t,e)=>t.appendChild(e),d=(t,e)=>{if(t.replaceChildren)t.replaceChildren(e);else{for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}},e=(t,e)=>t.classList.add(e),f=(t,e)=>t.classList.remove(e),g=(t,e)=>setTimeout(e,t),h=t=>clearTimeout(t),i=t=>console.error(t);let V,K,n;{V=(t,e)=>{void 0!==e&&null!=e?a.documentElement.style.setProperty(t,e):a.documentElement.style.removeProperty(t)};const I=t=>{const e=b("link");return e.rel="stylesheet",e.href=t,e};n=()=>{var t=I("css/main-min.css");return c(a.head,t),t},K=()=>{var t=I("https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css");return a.head.insertAdjacentElement("afterbegin",t),t}}let s,m;{const P="#000000",Q="#FFFFFF",W="is_dark_theme";let e;const $=()=>{var t=(e=localStorage.getItem(W))?Q:P;V("--text-color",e?Q:P),V("--bg-color",e?"rgb(70, 70, 70)":Q),V("--box-shadow-color",t+"80"),V("--small-box-shadow-color",t+"40"),V("--input-bg-color",e?"rgb(50, 60, 70)":"rgb(248, 248, 255)")},_=($(),()=>{n.title=e?"Light":"Dark"}),aa=t=>{e!==t&&(t?localStorage.setItem(W,!0):localStorage.removeItem(W),$(),_())},ba=()=>{a.body.style.display="block",n.style.display="inline-block",_(),g(null,()=>{const t=n.querySelector("input.switch");t.checked=e,t.addEventListener("change",()=>aa(t.checked))})};let n,o;s=()=>{o=!0,n&&ba()},m=t=>{n=t,o&&ba()}}const o=t=>{let e=new URL(window.location.href);return t?e.pathname.split("/").pop().replace(/\.htm(l|)$/,""):encodeURIComponent(e.hostname.toLowerCase().replace(/^www\./,"")+e.pathname.replace(/\.htm(l|)$/,""))};let p;{let s,r,c,i;const pa=()=>V("--content-header-height",c?0:i/(n?2:1));let n=!1,l=0;const ta=t=>{var e,n=Math.min(screen.availHeight,window.innerHeight),o=Math.min(screen.availWidth,window.innerWidth);let a;r&&(n===r||t&&!(n>r))||(r=n,a=!0),s&&(o===s||t&&!(o>s))||(s=o,a=!0),a&&(c=3*r/2<s,t=+((n=r<s)?r:s)/200,o=c?l:n?(s-r)/3:l/2,n=s*(c?.75:1),e=25*s/100,i=100*(i=Math.min(r/6,n/4))/r,n=100*Math.min(r/6,e/4)/r,V("--sidebar-display",c?"block":"none"),V("--sidebar-header-height",n),V("--content-width",c?"75%":"100%"),V("--content-top",c?0:i/2),V("--content-padding",t+"px"),V("--content-side-padding",o+"px"),V("--index-button-display",c?"none":"block"),pa())};p=()=>{l=getComputedStyle(a.documentElement).getPropertyValue("--card-padding").replace("px",""),ta()},screen.orientation.addEventListener("change",()=>ta());let t;window.addEventListener("resize",()=>{h(t),t=g(250,()=>ta(!0))});class wa extends HTMLDivElement{connectedCallback(){if(!this.t){this.t=!0;var t=this.getAttribute("data-custom-type");if("sidebar"==t)this.onscroll=()=>this.scrollTop=0;else if("content"==t)this.onscroll=()=>{var t=this.scrollTop>r*i/100/2;t!==n&&(n=t,pa())};else if("sidebar-contents"==t){const e=this;g(null,()=>{{const t=e.querySelector('a.contents[href*="'+o(!0)+'"]');t&&(t.scrollIntoView(),g(1e3,()=>t.scrollIntoView()),a.body.onload=()=>t.scrollIntoView(),t.style.fontWeight="bold")}})}else"clap-button-cont"==t?v(this):"dark-theme-switch"==t&&m(this)}}}customElements.define("custom-div",wa,{extends:"div"})}let r,v,X;{const Na=o(!0)+"_clapped",Oa=()=>localStorage.removeItem(Na),Pa=()=>{var t={expiry:(new Date).getTime()+2592e6};localStorage.setItem(Na,JSON.stringify(t))};let E;X=k=>{E?E(k):fetch("html/clap-button.htm").then(t=>{if(t.ok)return t.text();throw new Error("Response status: "+t.status)}).then(r=>{const l=b("clap-button");e(l,"no-link-tap-color"),c(n,l);var m=b("div");e(m,"clap-msg"),c(n,m),l.innerHTML=r;{var d=l,u=m,p=k;const h=d.querySelector(".count");let a=!(!(r=localStorage.getItem(Na))||(new Date).getTime()>JSON.parse(r).expiry&&(localStorage.removeItem(Na),1));a&&e(d,"dull");const v=()=>{u.innerText=a?"Thank you for giving a clap.":"Did you find this helpful? Let us know by giving a clap."},w=(v(),t=>{e(d,"clapped"),g(100,()=>{f(d,"clapped"),1<t&&g(100,()=>w(t)),t--})});let n=!1;d.addEventListener("mousedown",()=>{n||(n=!0,g(500,()=>n=!1),w(2),f(d,"clap"),d.offsetWidth,e(d,"clap"))});const y=t=>{let n=0;t&&(e(h,"count-anim"),g(500,()=>f(h,"count-anim")),n=100),g(n,()=>h.innerHTML=0<p?p.toLocaleString("en"):"")};y(!0);let s=!(E=t=>{p!==t&&(p=t,y(!0))});d.onclick=n=>{0!==n.button||s||(s=!0,a?g(1e3,()=>s=!1):g(300,()=>{p++,y(!0);let n;fetch(t+"/add-clap?url="+o(),{method:"POST"}).then(t=>{if(t.ok)return t.json();throw new Error("Response status: "+t.status)}).then(t=>{if(!t.claps)throw new Error(t.error||"No claps in received response");n=p!==t.claps,(0<(p=t.claps)?(e(d,"dull"),a=!0,Pa):(f(d,"dull"),a=!1,Oa))(),v()}).catch(t=>{i(t),p--,n=!0}).finally(()=>{s=!1,y(n)})}))}}}).catch(t=>{i(t)})};let n,a;r=()=>{a=!0,n&&(n.style.display="block")},v=t=>{n=t,e(n,"clap-container"),a&&(n.style.display="block")};class Va extends HTMLElement{}customElements.define("clap-button",Va)}const t="https://api.mirfatif.com",u="comment-";{const x0=n=>{const s="?url="+o();if(!n)return s;const t=new URL(window.location.href);if(t.searchParams.has("admin")){const r=b("dialog"),i=(e(r,"floating-dialog"),b("input")),l=(c(r,i),c(r,b("br")),b("button")),m=(c(r,l),b("button")),d=(c(r,m),i.style.padding="5px",i.style.marginBottom="10px",i.placeholder="Password",i.type="password",l.innerText="Confirm",e(l,"comment-submit-button"),l.type="button",m.innerText="Cancel",e(m,"comment-submit-button"),t=>{n(s+(t?"&p="+encodeURIComponent(t):"")),r.close(),a.body.removeChild(r)});i.onkeyup=t=>{"Enter"==t.key&&i.value&&d(i.value)},l.onclick=t=>{0==t.button&&i.value&&d(i.value)},m.onclick=()=>d(),c(a.body,r),r.showModal()}else n(s)},y0=t=>"comment_"+t+"_liked";let $,q;const E0="reply-to-id",H0={month:"short",day:"numeric",year:"numeric"},J0=t=>{let n=b("div");e(n,"comment-error-toast"),t.insertAdjacentHTML("beforeend","&nbsp;&nbsp;"),c(t,n);let o,a;return t=>{h(o),h(a),n.innerText=t||"Failed",n.style.display="inline-block",n.style.opacity=1,o=g(5e3,()=>{n.style.opacity=0,a=g(500,()=>n.style.display="none")})}},K0=t=>{var n=b("div");e(n,"progress-cont");const o=b("p");return o.innerText="Loading...",c(n,o),c(n,b("progress")),c(t,n),n},L0=(a,s)=>t=>{var n=b("div");e(n,"load-error-container");let o=b("span");e(o,"comment-load-error"),o.innerHTML=t,c(n,o),(o=b("span")).style.fontSize="150%",o.innerHTML="&nbsp;&#128543;",c(n,o),(s?d:c)(a,n)};let x,D,N;const P0=(n,o,a)=>{$=b("div"),e($,"add-comment-container"),c(n,$);n=b("textarea");c($,n);const s=b("input"),r=(e(s,"comment-input-field"),s.placeholder="Your email (recommended)",s.type="email",c($,s),b("p")),l=(e(r,"comment-input-notes"),r.innerHTML='Email is used to get your <a href="https://gravatar.com/">Gravatar</a>.',c($,r),b("input")),m=(e(l,"comment-input-field"),l.autocapitalize="words",l.placeholder="Your name (optional)",l.type="text",c($,l),b("p"));e(m,"comment-input-notes"),m.innerHTML='Name is displayed in the absence of <a href="https://gravatar.com/">Gravatar</a> profile.',c($,m);var n=b("div"),d=(c($,n),b("div"));e(d,"captcha-cont"),c(n,d);const u=b("div"),p=(e(u,"captcha-refresh"),c(d,u),u.innerHTML="&#8635;",u.title="Renew captcha image",u.onclick=t=>{0==t.button&&E()},b("img")),h=(e(p,"captcha"),c(d,p),p.alt="Captcha",p.title="Captcha image",p.src=o,b("progress")),v=(e(h,"captcha-refresh-progress"),c(d,h),b("input")),w=(e(v,"captcha-input-field"),c(d,v),v.type="text",v.placeholder="???",v.title="Captcha solution",v.onkeypress=t=>{t=t.which||t.keyCode;return(t<=31||48<=t&&t<=57)&&v.value.toString().length<=2},J0(n)),y=b("p"),k=(e(y,"comment-input-notes"),y.innerHTML="Please prove that you are not a bot.",c($,y),D=b("button"),e(D,"comment-submit-button"),e(D,"disabled-submit-button"),D.innerText="Submit",c($,D),N=J0($),b("p")),E=(e(k,"comment-input-notes"),k.innerHTML="* We use cookies to allow you delete your comment within 5 minutes of posting.",c($,k),()=>{e(u,"captcha-refresh-refreshing"),p.style.display="none",h.style.display="inline-block",a=null,fetch(t+"/get-captcha").then(t=>{if(t.ok)return t.json();throw new Error("Response status: "+t.status)}).then(t=>{if(!t.ci)throw new Error(t.error||"No captcha received");p.src=t.ci,a=t.cs,v.value=null}).catch(t=>{i(t),w(t),p.src=null}).finally(()=>{f(u,"captcha-refresh-refreshing"),p.style.display="inline-block",h.style.display="none"})}),S=()=>v.classList.toggle("captcha-input-error");x=()=>{if(v.value===a.toString())return[l.value.trim(),s.value.trim()];if(v.value)E(),w("Wrong value");else{w("Please..."),v.focus(),S();for(let t=1;t<4;t++)g(200*t,()=>S())}return null}},Q0=(n,r)=>{const c=t=>10<=t&&t<=1e3;let o,a;q=new EasyMDE({sideBySideFullscreen:!1,placeholder:n?"Your comment here":"Be the first to comment",toolbar:["bold","italic",{name:"heading",action:EasyMDE.toggleHeadingSmaller,className:"fa fa-header",title:"Heading",attributes:{"data-mde-toolbar-padded-button":!0}},"code","quote","unordered-list",{name:"ordered-list",action:EasyMDE.toggleOrderedList,className:"fa fa-list-ol",title:"Numbered List",attributes:{"data-mde-toolbar-padded-button":!0}},"link",{name:"image",action:EasyMDE.drawImage,className:"fa fa-picture-o",title:"Create Image Link",attributes:{"data-mde-toolbar-padded-button":!0}},"preview","side-by-side",{name:"fullscreen",action:EasyMDE.toggleFullScreen,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen",attributes:{"data-mde-toolbar-padded-button":!0}},"guide"],status:["lines","words",{className:"text-length",onUpdate:t=>{o=q.value().trim().length,a=o<10?"-"+(10-o):1e3<o?"+"+(o-1e3):o,t.innerHTML="chars: "+a,(c(o)?f:e)(D,"disabled-submit-button")}}]}),D.onclick=n=>{if(0===n.button){n=q.value().trim();if(c(n.length)){var o=x();if(o){const a={message:n};0<o[0].length&&(a.name=o[0]),0<o[1].length&&(a.email=o[1]);n=$.getAttribute(E0);n&&(a.reply_to=n),e(D,"comment-submitting"),D.innerText="Submitting...";const s=t=>{f(D,"comment-submitting"),D.innerText="Submit",N(t)};fetch(t+"/add-comment"+x0(),{method:"POST",credentials:"include",body:JSON.stringify(a)}).then(t=>T0(t,r,s)).catch(t=>{i(t),s(t)})}}}}};let z;const T0=(n,W,o,s)=>{if(!n.ok)throw new Error("Response status: "+n.status);n.json().then(r=>{if(!r.comments)throw new Error(r.error||"No comments in received response");{{var l=W;const w=r.comments,y=r.comment_count,k=r.reply_count,E=r.ci,S=r.cs,x=b("div");if(0<y||0<k){const C=b("div");e(C,"comment-reply-count"),C.innerText=y+" Comment"+(1==y?"":"s")+", "+(k||"No")+(1==k?" Reply":" Replies"),c(x,C)}for(let n=0;n<w.length;n++){const T=w[n];T.name||(T.name="Anonymous");var m=u+T.id;const D=b("hr"),F=(e(D,0==T.reply_level?"comments":"comment-reply"),e(D,"comment-reply-indent-lvl"+T.reply_level),c(x,D),b("article")),O=(e(F,"comment-item"),e(F,"comment-reply-indent-lvl"+T.reply_level),c(x,F),F.id=m,b("div"));e(O,"comment-body"),c(F,O),O.innerHTML=T.message;var p=b("div");e(p,"comment-bottom-container"),c(F,p);const P=b("div");e(P,"comment-buttons"),c(p,P);var h=b("div");e(h,"like-button-container"),c(P,h),P.insertAdjacentHTML("beforeend","&nbsp;&nbsp;");const _=b("div"),U=(e(_,"comment-like-count"),c(h,_),0<T.likes&&(_.innerText=T.likes),b("div"));e(U,"comment-bottom-button"),c(h,U),U.innerText=U.title="Like",h=T.id,null!==localStorage.getItem(y0(h))?e(U,"comment-button-active-disabled"):U.onclick=n=>{if(0==n.button){var o=T.id,a=U,s=_,r=A;e(a,"comment-button-active-disabled");let n=null;fetch(t+"/like-comment?cmt_id="+o,{method:"POST"}).then(t=>{if(t.ok)return t.json();throw new Error("Response status: "+t.status)}).then(t=>{if(!(t.like_count&&0<=t.like_count))throw new Error(t.error||"Bad likes count received");n=t.like_count}).catch(t=>{i(t),r(t)}).finally(()=>{var t;n&&0<n?(t=o,localStorage.setItem(y0(t),"true"),s.innerText=n):f(a,"comment-button-active-disabled")})}};let s;0==T.reply_level&&(s=b("div"),e(s,"comment-bottom-button"),e(s,"comment-reply-button"),c(P,s),s.innerText=s.title="Reply",P.insertAdjacentHTML("beforeend","&nbsp;&nbsp;"));const I=b("a");if(e(I,"comment-bottom-button"),c(P,I),I.innerText="Permalink",I.title="Link to comment",I.href="#"+m,T.deletion_ts){var h=T.deletion_ts,m=(new Date).getTime();if(NaN!==h&&m+1e4<h){P.insertAdjacentHTML("beforeend","&nbsp;&nbsp;");const j=b("div");e(j,"comment-bottom-button"),c(P,j),j.innerText=j.title="Delete",j.onclick=n=>{if(0==n.button){var n=T.id,o=j,a=l,s=A;e(o,"comment-button-disabled"),o.innerText="Deleting...";const r=t=>{f(o,"comment-button-disabled"),o.innerText="Delete",s(t)};fetch(t+"/del-comment"+x0()+"&cmt_id="+n,{method:"POST",credentials:"include"}).then(t=>T0(t,a,r)).catch(t=>{i(t),r(t)})}},g(h-m,()=>j.style.display="none")}}const A=J0(P);h=(t,n,o)=>{if(T.email_hash&&T.has_gravatar){const a=b("a");o&&e(a,"no-link-tap-color"),c(a,n),c(t,a),a.href="https://www.gravatar.com/"+T.email_hash}else c(t,n)},m=b("div");e(m,"comment-meta-container"),c(p,m);const B=b("img");e(B,"comment-avatar"),h(m,B,!0),B.alt="IMG",B.src="https://www.gravatar.com/avatar/"+(T.email_hash||"NOT_AVAILABLE")+"?d=mp";var v=b("div"),m=(e(v,"comment-author-date"),c(m,v),b("div"));e(m,"comment-author"),c(v,m);const H=b("b"),J=(H.innerHTML=T.name,h(m,H),b("div")),Y=(e(J,"comment-date"),c(v,J),J.innerHTML=(h=T.created_at,(m=((new Date).getTime()-h)/1e3)<86400?0==(v=Math.round(m/60/60))?"Just now":1==v?"An hour ago":v+" hours ago":m<604800?1==(v=Math.round(m/60/60/24))?"Yesterday":v+" days ago":new Date(h).toLocaleDateString("en-US",H0)),b("div"));if(c(p,Y),Y.style.clear="both",s){const G=b("div");c(p,G),s.onclick=t=>{var e,n,o,a;0==t.button&&(t=T.id,e=s,n=x,o=G,a=A,$&&q?"Cancel"==e.innerText?(c(n,$),e.innerText="Reply",$.removeAttribute(E0)):(o.parentElement.insertBefore($,o),q.codemirror.focus(),e.innerText="Cancel",$.setAttribute(E0,t)):a())}}}const D=b("hr"),N=(e(D,"comments"),c(x,D),b("script")),M=(N.src="https://cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js",K()),L=0<w.length;let n;z?(P0(x,E,S),d(l,x),Q0(L,l)):(N.onload=()=>R(!0,!0),N.onerror=()=>R(!0,!1),M.onload=()=>R(!1,!0),M.onerror=()=>R(!1,!1),n=K0(x),d(l,x));let o,a,s;const R=(t,e)=>{s||(e?(t?o=!0:a=!0,o&&a&&(z=!0,x.removeChild(n),P0(x,E,S),Q0(L,l),V("--cmt-reply-btn-ptr-events","unset"))):(s=!0,L0(x)('Error: Failed to load <a href="https://github.com/Ionaru/easy-markdown-editor">EasyMDE</a>'),x.removeChild(n)))};c(x,N)}X(r.claps);let n,o;s&&(n=new URL(window.location.href).hash)&&n.startsWith("#"+u)&&(o=a.getElementById(n.substring(1)))&&g(1e3,()=>o.scrollIntoView())}}).catch(t=>{i(t),o(t)})};class V0 extends HTMLElement{connectedCallback(){if(!this.t){var n=this;K0(n);const o=L0(n,!0);x0(e=>{fetch(t+"/get-comments"+e,{credentials:"include"}).then(t=>T0(t,n,o,!0)).catch(t=>{i(t),o(t)})})}this.t=!0}}customElements.define("comments-container",V0)}n().onload=()=>{r(),s(),p()}}